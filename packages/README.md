# What is this directory?

Packages are self contained, modular, closed, optionally dependent code-packages
for a specific map detail (eg. Heightmap, Grid, Windrose, States or Roads).

They are:

- *Self contained* as they include the data model, data access API,
  data modification API, generation algorithm, render algorithm,
  generator UI and modification UI in a single package.
- *Modular* as they must obey specific rules and have some particular structure
  (implement a Package interface). Thanks to this, they are interchangable.
- *Closed* as they expose a specific API (interface) for other Packages.
  Implementation details and (most of the) data structure is hidden.
- *Optionally dependent* as packages may depend on other packages' data
  (eg. Road on Heightmap) but some dependencies can be optional.

# Package Interface

## Legacy state generators

Legacy generators are not real "generators" in a sense they relay on existing
data structures (eg. grid or pack). They won't actually generate anything
merely provide the required interface for the particular package (MapDetail).


## Structures (data interfaces)

*DetailState*
: serializable class storing state of the particular Map Detail
  (eg. RoadState is a DetailState). Exposes detail-specific methods
  (the detail's API).

*DetailQueue*
: Ordered list of DetailStates

*DetailList*
: Ordered list of DetailState identifiers (unique id-s of )

*GeneratorConfig*
: serializable dictionary object generated by the package's configurator UI
  and consumed by detail generator.

## Methods

`async generate(GeneratorConfig, DetailQueue): DetailState[]`
: Factory method for the specific Map Detail state. GeneratorConfig can be any
  object generated by


`async configure(DetailQueue): GeneratorConfig`
: Factory method for the state. GeneratorConfig can be any object generated b

`async render(SVG, DetailState, DetailQueue): SVG`
:
